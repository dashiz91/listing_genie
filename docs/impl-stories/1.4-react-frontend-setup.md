# Story 1.4: React Frontend Setup

**Phase:** 1 - Foundation
**Story ID:** 1.4
**Title:** Set Up React Frontend with Vite
**Priority:** Must Have
**Complexity:** Medium
**Status:** Ready for Development

---

## User Story

As a developer, I need a React frontend configured with Vite, TypeScript, and Tailwind CSS so that I can build the user interface.

---

## Acceptance Criteria

- [ ] Vite + React + TypeScript project created
- [ ] Tailwind CSS configured and working
- [ ] API client with axios configured
- [ ] Basic routing setup (React Router)
- [ ] Environment variable support (.env)
- [ ] Development server runs on localhost:5173
- [ ] Can make API calls to backend at localhost:8000

---

## Project Structure (IMPLEMENT THIS)

```
frontend/
├── src/
│   ├── main.tsx              # Entry point
│   ├── App.tsx               # Main app component
│   │
│   ├── api/
│   │   ├── client.ts         # Axios API client
│   │   └── types.ts          # API type definitions
│   │
│   ├── components/
│   │   └── ui/               # Shared UI components
│   │       ├── Button.tsx
│   │       ├── Card.tsx
│   │       └── Input.tsx
│   │
│   ├── pages/
│   │   ├── LandingPage.tsx   # Home page
│   │   ├── UploadPage.tsx    # Upload step (placeholder)
│   │   ├── FormPage.tsx      # Form step (placeholder)
│   │   ├── GenerationPage.tsx # Generation step (placeholder)
│   │   └── GalleryPage.tsx   # Gallery step (placeholder)
│   │
│   ├── styles/
│   │   └── index.css         # Global styles + Tailwind
│   │
│   └── lib/
│       └── utils.ts          # Utility functions
│
├── public/
├── index.html
├── package.json
├── tsconfig.json
├── vite.config.ts
├── tailwind.config.js
├── postcss.config.js
└── .env.example
```

---

## Code to Implement

### Initialize Project

```bash
# From listing_genie root directory
npm create vite@latest frontend -- --template react-ts
cd frontend
npm install

# Install dependencies
npm install axios react-router-dom
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# Install UI dependencies
npm install lucide-react clsx tailwind-merge
```

### vite.config.ts

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true,
      },
    },
  },
})
```

### tailwind.config.js

```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#f0f9ff',
          100: '#e0f2fe',
          500: '#0ea5e9',
          600: '#0284c7',
          700: '#0369a1',
        },
      },
    },
  },
  plugins: [],
}
```

### src/styles/index.css

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}
```

### src/api/client.ts

```typescript
import axios, { AxiosInstance } from 'axios';

const API_BASE = import.meta.env.VITE_API_URL || '/api';

class ApiClient {
  private client: AxiosInstance;

  constructor() {
    this.client = axios.create({
      baseURL: API_BASE,
      timeout: 60000,
      headers: {
        'Content-Type': 'application/json',
      },
    });

    // Response interceptor for error handling
    this.client.interceptors.response.use(
      (response) => response,
      (error) => {
        if (error.response?.status === 500) {
          console.error('Server error:', error.response.data);
        }
        return Promise.reject(error);
      }
    );
  }

  // Health check
  async healthCheck(): Promise<{ status: string; dependencies: Record<string, string> }> {
    const response = await this.client.get('/health');
    return response.data;
  }

  // Upload image (placeholder for Story 1.1)
  async uploadImage(file: File): Promise<{ upload_id: string; preview_url: string }> {
    const formData = new FormData();
    formData.append('file', file);
    const response = await this.client.post('/upload', formData, {
      headers: { 'Content-Type': 'multipart/form-data' },
    });
    return response.data;
  }
}

export const apiClient = new ApiClient();
```

### src/api/types.ts

```typescript
export enum ImageType {
  MAIN = 'main',
  INFOGRAPHIC_1 = 'infographic_1',
  INFOGRAPHIC_2 = 'infographic_2',
  LIFESTYLE = 'lifestyle',
  COMPARISON = 'comparison',
}

export enum GenerationStatus {
  PENDING = 'pending',
  PROCESSING = 'processing',
  COMPLETE = 'complete',
  PARTIAL = 'partial',
  FAILED = 'failed',
}

export interface ProductInfo {
  title: string;
  features: [string, string, string];
  target_audience: string;
}

export interface GenerateRequest {
  upload_id: string;
  product_info: ProductInfo;
  keywords: string[];
}

export interface ImageStatus {
  type: ImageType;
  status: GenerationStatus;
  url?: string;
  error?: string;
}

export interface GenerationResponse {
  session_id: string;
  status: GenerationStatus;
  images: ImageStatus[];
  created_at: string;
  completed_at?: string;
}
```

### src/App.tsx

```typescript
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import LandingPage from './pages/LandingPage';
import UploadPage from './pages/UploadPage';
import FormPage from './pages/FormPage';
import GenerationPage from './pages/GenerationPage';
import GalleryPage from './pages/GalleryPage';

function App() {
  return (
    <Router>
      <div className="min-h-screen bg-gray-50">
        <Routes>
          <Route path="/" element={<LandingPage />} />
          <Route path="/upload" element={<UploadPage />} />
          <Route path="/form" element={<FormPage />} />
          <Route path="/generate" element={<GenerationPage />} />
          <Route path="/gallery" element={<GalleryPage />} />
        </Routes>
      </div>
    </Router>
  );
}

export default App;
```

### src/pages/LandingPage.tsx

```typescript
import { useNavigate } from 'react-router-dom';
import { Sparkles } from 'lucide-react';

export default function LandingPage() {
  const navigate = useNavigate();

  return (
    <div className="flex flex-col items-center justify-center min-h-screen p-8">
      <div className="max-w-4xl mx-auto text-center">
        <Sparkles className="w-16 h-16 mx-auto mb-6 text-primary-500" />

        <h1 className="text-5xl font-bold mb-4">
          Transform Your Product Photos
        </h1>

        <p className="text-xl text-gray-600 mb-8">
          AI-powered Amazon listing images in 60 seconds
        </p>

        <button
          onClick={() => navigate('/upload')}
          className="px-8 py-4 bg-primary-500 text-white rounded-lg text-lg font-semibold hover:bg-primary-600 transition"
        >
          Start Generating
        </button>

        <div className="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
          <div className="p-6 bg-white rounded-lg shadow-sm">
            <h3 className="font-semibold mb-2">Upload Photo</h3>
            <p className="text-sm text-gray-600">
              Upload your product photo
            </p>
          </div>

          <div className="p-6 bg-white rounded-lg shadow-sm">
            <h3 className="font-semibold mb-2">Add Details</h3>
            <p className="text-sm text-gray-600">
              Describe your product and audience
            </p>
          </div>

          <div className="p-6 bg-white rounded-lg shadow-sm">
            <h3 className="font-semibold mb-2">Download Images</h3>
            <p className="text-sm text-gray-600">
              Get 5 optimized listing images
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}
```

### src/pages/UploadPage.tsx (Placeholder)

```typescript
export default function UploadPage() {
  return (
    <div className="flex items-center justify-center min-h-screen">
      <div className="text-center">
        <h1 className="text-3xl font-bold">Upload Page</h1>
        <p className="text-gray-600 mt-2">Implementation in Story 1.1</p>
      </div>
    </div>
  );
}
```

### src/pages/FormPage.tsx (Placeholder)

```typescript
export default function FormPage() {
  return (
    <div className="flex items-center justify-center min-h-screen">
      <div className="text-center">
        <h1 className="text-3xl font-bold">Form Page</h1>
        <p className="text-gray-600 mt-2">Implementation in Story 1.2</p>
      </div>
    </div>
  );
}
```

### src/pages/GenerationPage.tsx (Placeholder)

```typescript
export default function GenerationPage() {
  return (
    <div className="flex items-center justify-center min-h-screen">
      <div className="text-center">
        <h1 className="text-3xl font-bold">Generation Page</h1>
        <p className="text-gray-600 mt-2">Implementation in Story 3.x</p>
      </div>
    </div>
  );
}
```

### src/pages/GalleryPage.tsx (Placeholder)

```typescript
export default function GalleryPage() {
  return (
    <div className="flex items-center justify-center min-h-screen">
      <div className="text-center">
        <h1 className="text-3xl font-bold">Gallery Page</h1>
        <p className="text-gray-600 mt-2">Implementation in Story 3.x</p>
      </div>
    </div>
  );
}
```

### src/lib/utils.ts

```typescript
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

### .env.example

```
VITE_API_URL=http://localhost:8000/api
```

### package.json (UPDATE scripts)

```json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0"
  }
}
```

---

## Test Gate (Must Pass Before Story 1.5)

```bash
# From frontend/ directory
npm run dev
# Expected: Dev server starts on http://localhost:5173

# Open browser to http://localhost:5173
# Expected: Landing page loads with "Transform Your Product Photos" heading

# Test navigation
# Click "Start Generating" button
# Expected: Navigates to /upload (shows placeholder)

# Test API client (browser console)
import { apiClient } from './src/api/client';
await apiClient.healthCheck();
# Expected: Returns health check data from backend

# Test Tailwind
# Inspect elements - should see Tailwind utility classes applied

# Test routing
# Navigate to: /, /upload, /form, /generate, /gallery
# Expected: Each route loads appropriate placeholder page

# Build production
npm run build
# Expected: Builds successfully, creates dist/ folder
```

---

## Dependencies

- **Depends On:** 1.1 (FastAPI Backend for API calls)
- **Blocks:** 1.1, 1.2, 1.3 (UI implementation stories)

---

## Definition of Done

- [ ] Frontend project created with Vite + React + TypeScript
- [ ] Tailwind CSS installed and working
- [ ] API client configured with axios
- [ ] React Router setup with all placeholder pages
- [ ] Landing page fully implemented
- [ ] Development server runs on localhost:5173
- [ ] Can make API calls to backend (health check works)
- [ ] All routes accessible (/, /upload, /form, /generate, /gallery)
- [ ] Production build works (npm run build)
- [ ] No TypeScript errors
- [ ] No console errors in browser

---

## Notes for Developer

1. **Vite:** Faster than Create React App, better DX
2. **TypeScript:** Type safety for API calls and state management
3. **Tailwind:** Utility-first CSS for rapid UI development
4. **Proxy:** Vite proxy configured to forward /api requests to backend
5. **Environment Variables:** Use VITE_ prefix for Vite to expose them
6. **Lucide Icons:** Using lucide-react for icons (lightweight alternative to FontAwesome)
7. **Path Alias:** @/ alias configured for cleaner imports
8. **Placeholders:** Other pages are placeholders - will be implemented in their respective stories

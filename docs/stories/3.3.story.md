# Story 3.3: Download Single Images

**Epic:** Epic 3 - Gallery & Download
**Story ID:** 3.3
**Title:** Download Single Images
**Priority:** Must Have
**Complexity:** Small
**Status:** Draft

---

## User Story

As a user, I want to download individual images so that I can choose which ones to use.

---

## Acceptance Criteria

- [ ] Download button visible for each image in gallery
- [ ] Download button visible in preview modal
- [ ] Images download as PNG format
- [ ] Filename includes image type (e.g., "listing_main_image.png")
- [ ] Download triggers browser's native download
- [ ] Download works on mobile devices

---

## Technical Notes

### API Endpoint
```
GET /api/download/{session_id}/{image_type}
Response: image/png binary

Headers:
- Content-Type: image/png
- Content-Disposition: attachment; filename="listing_{image_type}.png"
```

### Filename Convention
| Image Type | Filename |
|------------|----------|
| main | listing_main_image.png |
| infographic_1 | listing_infographic_1.png |
| infographic_2 | listing_infographic_2.png |
| lifestyle | listing_lifestyle.png |
| comparison | listing_comparison.png |

### Download Button Placement
1. **Gallery Card:** Icon button on each image card
2. **Preview Modal:** Primary button below image

### Implementation
```javascript
async function downloadImage(sessionId, imageType) {
    const response = await fetch(`/api/download/${sessionId}/${imageType}`);
    const blob = await response.blob();

    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `listing_${imageType}.png`;
    a.click();
    window.URL.revokeObjectURL(url);
}
```

### Mobile Considerations
- Button tap target min 44x44px
- Download triggers native behavior
- May open in new tab on some browsers

---

## Dependencies

- **Depends On:** Story 3.1 (Gallery), Story 2.7 (Storage)
- **Required By:** None

---

## Definition of Done

- [ ] Download button on each gallery card
- [ ] Download button in preview modal
- [ ] Files download as PNG
- [ ] Filenames are descriptive
- [ ] Browser native download triggered
- [ ] Works on desktop browsers
- [ ] Works on mobile browsers
- [ ] Button tap targets adequate size

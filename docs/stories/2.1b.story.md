# Story 2.1b: Implement Creative Blueprint Prompt Templates

**Epic:** Epic 2 - Image Generation Engine
**Story ID:** 2.1b
**Title:** Implement Creative Blueprint Prompt Templates
**Priority:** Must Have
**Complexity:** Large
**Status:** Draft

---

## User Story

As the system, I need a prompt engineering system based on the Creative Blueprint so that generated images follow high-conversion Amazon listing best practices.

---

## Acceptance Criteria

- [ ] Prompt templates implement Creative Blueprint guidelines (docs/creative-blueprint.md)
- [ ] Main Image prompt includes: dynamic composition, stacking, ingredient pop, premium textures
- [ ] Infographic prompts include: benefit-focused headlines, bold text, <20% text density
- [ ] Lifestyle prompt includes: Instagram aesthetic, target audience matching, emotional resonance
- [ ] Comparison prompt includes: check vs. X format, color psychology, clear winner hierarchy
- [ ] All prompts pass uploaded product photo as reference image
- [ ] Prompts inject product title, features, and target audience dynamically
- [ ] Color palette selected based on product category (organic->earthy, fitness->neons, etc.)
- [ ] Prompt templates stored as configurable files (easy to iterate/improve)
- [ ] A/B testing capability for prompt variations (track which prompts perform best)

---

## Technical Notes

### CRITICAL: This story represents core IP

Prompt quality directly determines output quality and user satisfaction. Invest significant effort here.

### Prompt Engine Reference
See `docs/architecture.md` Section 5.2 and 5.3 for PromptEngine implementation.
See `docs/creative-blueprint.md` for complete prompt templates and guidelines.

### Prompt Template Structure
```
[STYLE INJECTION]
{style_template_content}

[PRODUCT CONTEXT]
Product: {product_title}
Target Audience: {target_audience}
Key Features: {feature_1}, {feature_2}, {feature_3}

[IMAGE TYPE INSTRUCTIONS]
{specific_instructions_for_image_type}

[REFERENCE IMAGE]
Use the provided product photo as the base reference.
Maintain product accuracy while applying creative direction.

[TECHNICAL REQUIREMENTS]
- Resolution: 2000x2000px minimum
- Format: PNG with RGB color mode
- Amazon compliance: {specific_requirements}
```

### Color Psychology Reference
See `docs/architecture.md` Section 6.4 for category palettes:
- health_supplements: earthy greens, natural browns
- fitness: bold blacks, energetic reds, neons
- baby_kids: soft pastels, warm yellows
- tech_electronics: deep blues, clean whites
- home_kitchen: warm neutrals, wood tones

### File Structure
```
app/prompts/
|-- engine.py              # Main PromptEngine class
|-- templates/
|   |-- main_image.py      # Main image template
|   |-- infographic.py     # Infographic templates (1 & 2)
|   |-- lifestyle.py       # Lifestyle template
|   |-- comparison.py      # Comparison chart template
|-- color_psychology.py    # Category-based colors
```

---

## Dependencies

- **Depends On:** Story 2.1 (Gemini API Integration)
- **Required By:** Story 2.2, Story 2.3, Story 2.4, Story 2.5, Story 4.3

---

## Definition of Done

- [ ] PromptEngine class implemented
- [ ] All 5 prompt templates created per Creative Blueprint
- [ ] Dynamic variable injection works
- [ ] Color palette inference from product category works
- [ ] Prompts are configurable/editable
- [ ] Reference image instruction included in all prompts
- [ ] A/B testing structure in place (even if not active)
- [ ] Generated test prompts match Creative Blueprint guidelines

# Story 4.2: Classify Keywords by Buyer Intent

**Epic:** Epic 4 - Keyword Intent System
**Story ID:** 4.2
**Title:** Classify Keywords by Buyer Intent
**Priority:** Must Have
**Complexity:** Medium
**Status:** Draft

---

## User Story

As the system, I need to classify keywords by intent type so that images can be tailored to specific buyer motivations.

---

## Acceptance Criteria

- [ ] System categorizes keywords into intent groups:
  - Durability/Quality (e.g., "long-lasting", "premium", "heavy-duty")
  - Use Case (e.g., "for camping", "office use", "travel size")
  - Style/Aesthetic (e.g., "modern", "minimalist", "vintage")
  - Problem/Solution (e.g., "pain relief", "easy clean", "quick setup")
  - Comparison (e.g., "best", "vs", "alternative to")
- [ ] AI-assisted classification using keyword analysis
- [ ] User can review and adjust classifications
- [ ] Intent groups inform prompt generation
- [ ] Multiple intents per keyword supported

---

## Technical Notes

### Intent Classification System
From `docs/creative-blueprint.md` Section 5:

| Intent Category | Example Keywords | Visual Proof Required |
|-----------------|------------------|----------------------|
| Durability/Quality | "long-lasting", "premium", "heavy-duty" | Rugged textures, stress tests |
| Use Case | "for camping", "office use", "travel size" | Product in exact context |
| Style/Aesthetic | "modern", "minimalist", "vintage" | Matching visual aesthetic |
| Problem/Solution | "pain relief", "easy clean", "quick setup" | Before/after, solved state |
| Comparison | "best", "vs", "alternative to" | Superiority indicators |

### Classification Approach
Use keyword pattern matching with fallback to simple heuristics:

```python
INTENT_PATTERNS = {
    'durability': ['long-lasting', 'durable', 'premium', 'heavy-duty', 'professional'],
    'use_case': ['for ', ' use', 'travel', 'outdoor', 'office', 'home'],
    'style': ['modern', 'minimalist', 'vintage', 'classic', 'sleek'],
    'problem_solution': ['relief', 'easy', 'quick', 'no mess', 'simple'],
    'comparison': ['best', 'vs', 'better', 'alternative', 'upgraded'],
}
```

### KeywordService Reference
See `docs/architecture.md` for keyword_service.py implementation.

### UI: Intent Preview
Show classified intents to user with ability to adjust:
```
Keywords: [sleep gummies] [natural sleep aid] [melatonin gummies]

Detected Intents:
- Problem/Solution: "sleep aid", "better sleep"
- Style: "natural", "organic"

[Adjust Classifications] (optional)
```

---

## Dependencies

- **Depends On:** Story 4.1, Story 5.3 (Database)
- **Required By:** Story 4.3 (Intent-Aligned Generation)

---

## Definition of Done

- [ ] All 5 intent categories implemented
- [ ] Keywords classified automatically on input
- [ ] Multiple intents per keyword supported
- [ ] Intent preview shown to user
- [ ] User can adjust classifications (nice-to-have)
- [ ] Intents stored with keywords in database
- [ ] Classification service accessible to prompt engine
